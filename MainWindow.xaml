<Window x:Class="JJ_Lurgi_Piping_EB.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="JJ Lurgi Piping EB"
        Height="620" Width="980"
        WindowStartupLocation="CenterOwner">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <!-- Build banner -->
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="8"/>
            <!-- Toolbar -->
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="8"/>
            <!-- Body -->
            <RowDefinition Height="*"/>
            <RowDefinition Height="8"/>
            <!-- Status -->
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Build / Load info (so you ALWAYS see which DLL is running) -->
        <Border Grid.Row="0" Background="#FFF7F7F7" Padding="6" BorderBrush="#FFE0E0E0" BorderThickness="1">
            <TextBlock x:Name="TxtBuildInfo" FontSize="11" Foreground="#666" TextTrimming="CharacterEllipsis"/>
        </Border>

        <!-- Top buttons -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" VerticalAlignment="Center">
            <CheckBox x:Name="ChkSelectAll" Content="Select all (visible)" Margin="0,0,12,0"
                      Checked="ChkSelectAll_Checked" Unchecked="ChkSelectAll_Checked"/>
            <Button x:Name="BtnGenerate" Content="Generate Datasheets" Width="165" Margin="0,0,8,0"
                    Click="BtnGenerate_Click"/>
            <Button x:Name="BtnReset" Content="Reset" Width="90" Margin="0,0,8,0" Click="BtnReset_Click"/>
            <Button x:Name="BtnClose" Content="Close" Width="90" Click="BtnClose_Click"/>
        </StackPanel>

        <!-- Body: single grouped grid (no tree) -->
        <GroupBox Grid.Row="4" Header="Items from JLE / Materials" Margin="0">
            <Grid>
                <DataGrid x:Name="GridItems"
                          AutoGenerateColumns="False"
                          CanUserAddRows="False"
                          CanUserDeleteRows="False"
                          IsReadOnly="False"
                          HeadersVisibility="Column"
                          Margin="4"
                          SelectionChanged="GridItems_SelectionChanged">

                    <!-- Group headers: Bolts & Nuts / Pipe & Fittings / Valves / ... -->
                    <DataGrid.GroupStyle>
                        <GroupStyle>
                            <GroupStyle.HeaderTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Name}"
                                               FontWeight="Bold"
                                               FontSize="14"
                                               Margin="0,8,0,2"/>
                                </DataTemplate>
                            </GroupStyle.HeaderTemplate>
                        </GroupStyle>
                    </DataGrid.GroupStyle>

                    <DataGrid.Columns>
                        <!-- Checkbox -->
                        <DataGridCheckBoxColumn Header="" Binding="{Binding IsSelected, Mode=TwoWay}" Width="40"/>

                        <!-- Code -->
                        <DataGridTextColumn Header="Code" Binding="{Binding Code}" Width="160" IsReadOnly="True"/>

                        <!-- Useful info instead of Attributes: Category -->
                        <DataGridTextColumn Header="Category" Binding="{Binding Category}" Width="*" IsReadOnly="True"/>
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>
        </GroupBox>

        <!-- Status bar -->
        <TextBlock x:Name="TxtStatus" Grid.Row="6"
                   Text="Ready." Foreground="Gray"/>
    </Grid>
</Window>
